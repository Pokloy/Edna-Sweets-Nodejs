<!DOCTYPE html>
<html lang="en">
<%- include('./partial/head.ejs') %>

    <body>
        <%- include('./partial/nav.ejs') %>
            <section class="page-section cta">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-9 mx-auto">
                            <div class="cta-inner bg-faded text-center rounded">
                                <h2 class="section-heading mb-4">
                                    <span class="section-heading-upper">Order Now</span>
                                    <span class="section-heading-lower">Feel The Taste of Heavens</span>
                                </h2>
                                <% if(message.length> 0){ %>
                                    <div class="alert alert-success">
                                        <%= message %>
                                    </div>

                                    <% } else { %>
                                        <div class="alert alert-danger">
                                            <%= message %>
                                        </div>
                                        <% } %>
                                            <form action="/order" method="POST">
                                                <div class="form-group">
                                                    <label for="name" class="label-left">Full Name</label>
                                                    <input type="text" class="form-control" id="name" name="name"
                                                        placeholder="Enter Name" required>
                                                </div>
                                                <div class="form-group">
                                                    <label for="address" class="label-left">Delivery Address</label>
                                                    <input type="text" class="form-control" id="address" name="address"
                                                        placeholder="Enter your Delivery Address" required>
                                                </div>
                                                <div class="form-group">
                                                    <label for="pnumber" class="label-left">Phone Number</label>
                                                    <input type="number" class="form-control" id="pnumber"
                                                        name="pnumber" placeholder="Enter your phone number" required>
                                                </div>

                                                <!-- modifed code -->
                                                <label for="product" class="label-left">Product: </label>
                                                <select class="form-control" id="product" name="product" required>
                                                    <option>Product you want to order</option>
                                                    <option value="Yema Tart with peanut">Yema Tart with peanut ₱15.00</option>
                                                    <option value="Yema Tart with ube">Yema Tart with ube ₱15.00</option>
                                                    <option value="Mammon">Mammon ₱25.00 </option>
                                                </select>


                                                <div class="form-group">
                                                    <label for="quantity" class="label-left">Quantity</label>
                                                    <input type="number" class="form-control" id="quantity"
                                                        name="quantity" placeholder="Enter Quantity" required>
                                                </div>

                                                <div class="form-group">
                                                    <label for="price" class="label-left">Total Price</label>
                                                    <input type="text" class="form-control" id="price" name="price"
                                                        disabled>
                                                </div>
                                                <button type="submit" class="btn btn-primary label-left">Order
                                                    Now</button>
                                            </form>
                                            <script>
                                                document.addEventListener("DOMContentLoaded", function () {
                                                    let Prices = document.getElementById("product");
                                                    let Quantity = document.getElementById("quantity");
                                                    let tprice = document.getElementById("price");

                                                    // Add an event listener to handle changes in the select and input fields
                                                    Prices.addEventListener("change", calculateTotalPrice);
                                                    Quantity.addEventListener("input", calculateTotalPrice);

                                                    // Function to calculate the total price
                                                    function calculateTotalPrice() {
                                                        let selectedOption = Prices.value;
                                                        let quantity = Quantity.value;
                                                        let total = 0;

                                                        if (selectedOption === "Yema Tart with ube" || selectedOption === "Yema Tart with peanut") {
                                                            total = quantity * 15;
                                                        } else if (selectedOption === "Mammon") {
                                                            total = quantity * 25;
                                                        }
                                                        // Corrected: Set the value of the "price" input element
                                                        tprice.value = total;
                                                    }
                                                });
                                            </script>
                            </div>
                        </div>
                    </div>
                </div>
            </section>







            <%- include('./partial/footer.ejs') %>


    </body>

</html>